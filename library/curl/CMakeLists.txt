cmake_minimum_required(VERSION 3.1)

project("curl" C)

set(CURL_VER curl-7.60.0)

set(CURL_SRC_DIR
    ${CMAKE_CURRENT_SOURCE_DIR}/${CURL_VER}
    CACHE INTERNAL "CURL_SRC_DIR")
set(CURL_BIN_DIR
    ${CMAKE_CURRENT_BINARY_DIR}/${CURL_VER}
    CACHE INTERNAL "CURL_BIN_DIR")
set(CURL_INC_DIR
    ${CURL_SRC_DIR}/include
    CACHE INTERNAL "CURL_INC_DIR")

set(MBEDTLS_INCLUDE_DIRS
    ${MBEDTLS_SRC_DIR}/include)

set(MBEDCRYPTO_LIBRARY mbedcrypto)
set(MBEDTLS_LIBRARY    mbedtls)
set(MBEDX509_LIBRARY   mbedx509)

set(ZLIB_LIBRARIES zlib
    CACHE INTERNAL "ZLIB_LIBRARIES")
set(ZLIB_INCLUDE_DIRS ${ZLIB_SRC_DIR} ${ZLIB_BIN_DIR}
    CACHE INTERNAL "ZLIB_INCLUDE_DIRS")

set(BUILD_CURL_EXE    OFF CACHE BOOL "" FORCE)
set(CURL_STATICLIB    ON  CACHE BOOL "" FORCE)
set(BUILD_TESTING     OFF CACHE BOOL "" FORCE)
set(USE_MANUAL        OFF CACHE BOOL "" FORCE)
set(CURL_WINDOWS_SSPI OFF CACHE BOOL "" FORCE)
set(CMAKE_USE_MBEDTLS ON  CACHE BOOL "" FORCE)

set(CURL_ZLIB         OFF CACHE BOOL "" FORCE)
set(HAVE_LIBZ         ON  CACHE BOOL "" FORCE)
set(HAVE_ZLIB_H       ON  CACHE BOOL "" FORCE)
set(HAVE_ZLIB         ON  CACHE BOOL "" FORCE)

add_subdirectory(${CURL_SRC_DIR})
add_subdirectory(tests)
